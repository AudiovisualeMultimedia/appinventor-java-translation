<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE API SYSTEM "APIMapping.dtd">

<!--
    Document   : APIMapping.xml
    Created on : July 19, 2011, 12:06 PM
    Author     : Joshua Swank
    Description:
        Mappings from block genus to API
-->

<API>
    <Type name="java.lang.String" default="&quot;&quot;" literalGenusPattern="text" literalFormatString="&quot;%s&quot;" />
    <Type name="java.lang.Integer" default="0" />
    <Type name="java.lang.Float" default="0.0f" literalGenusPattern="number" literalFormatString="%sf" />
    <Type name="java.lang.Boolean" default="false" literalGenusPattern="true|false" />
    <Type name="java.util.List" default="null" />
    <Type name="java.lang.Object" default="null" />

    <Entry genus="make-list" static="true" type="List" nParams="1" simpleFunction="java.util.Arrays.asList">
        <Parameter type="Object[]" />
    </Entry>

    <Entry genus="make-list" static="true" type="List" minParams="0">
        <Parameters start="0" type="Object" />
        <Call genus="make-list">
            <Parameter>
                <UtilityFunction name="join" type="Object[]">
                    <Parameters start="0" type="Object" />
                </UtilityFunction>
            </Parameter>
        </Call>
    </Entry>

    <Entry genus="get-list-item" target="List" static="false" type="Object" nParams="1" simpleFunction="get">
        <Parameter type="Integer" />
    </Entry>

    <!--Entry genus="string-split-at-first-of-any" target="String" static="false" nParams="1" type="List">
        <Parameter type="List" />
    </Entry-->

    <Entry genus="string-split-at-any" target="String" static="false" nParams="1" type="List">
        <Parameter type="List" />
        <Function type="List" name="split" static="false">
            <Parameter>
                <UtilityFunction name="joinRegex" type="String">
                    <Parameter index="0" type="List" />
                </UtilityFunction>
            </Parameter>
        </Function>
    </Entry>

    <Entry genus="string-upcase" target="String" static="false" nParams="0" simpleFunction="toUpperCase" type="String" />
    <Entry genus="string-downcase" target="String" static="false" nParams="0" simpleFunction="toLowerCase" type="String" />

    <Entry genus="string-contains" target="String" static="false" nParams="1" simpleFunction="contains" type="Boolean">
        <Parameter type="String" />
    </Entry>

    <Entry genus="string-append" target="String" static="false" nParams="1" simpleFunction="concat" type="String">
        <Parameter type="String" />
    </Entry>

    <Entry genus="string-equal" target="String" static="false" nParams="1" simpleFunction="equals" type="Boolean">
        <Parameter type="String" />
    </Entry>

    <Entry genus="string-trim" target="String" static="false" nParams="0" simpleFunction="trim" type="String" />

    <Entry genus="string-replace-all" target="String" static="false" nParams="2" simpleFunction="replaceAll" type="String">
        <Parameters type="String" start="0" end="1" />
    </Entry>

    <Entry genus="string-subtext" target="String" static="false" nParams="2" type="String">
        <Parameters type="Integer" start="0" end="1" />
        <Function type="String" name="substring" static="false">
            <Parameter>
                <Operation style="infix" target="Integer" value="-" type="Integer" nParams="1">
                    <Value index="0" type="Integer" />
                    <Parameter value="1" type="Integer" />
                </Operation>
            </Parameter>
            <Parameter>
                <Operation style="infix" target="Integer" value="-" type="Integer" nParams="1">
                    <Operation style="infix" target="Integer" value="+" type="Integer" nParams="1">
                        <Value index="0" type="Integer" />
                        <Parameter index="1" type="Integer" />
                    </Operation>
                    <Parameter value="1" type="Integer" />
                </Operation>
            </Parameter>
        </Function>
    </Entry>

    <Entry genus="string-split" target="String" static="false" nParams="1" type="List">
        <Parameter type="String" />
        <Call genus="make-list">
            <Parameter>
                <Function type="String[]" name="split" static="false">
                    <Parameter index="0" type="String" />
                </Function>
            </Parameter>
        </Call>
    </Entry>

    <Entry genus="string-split-at-first" target="String" static="false" nParams="1" type="List">
        <Parameter type="String" />
        <Call genus="make-list">
            <Parameter>
                <Function name="split" type="String[]" static="false">
                    <Parameter index="0" type="String" />
                    <Parameter value="2" type="Integer" />
                </Function>
            </Parameter>
        </Call>
    </Entry>

    <Entry genus="string-starts-at" target="String" static="false" nParams="1" type="Integer">
        <Parameter type="String" />
        <Operation style="unary" target="Integer" value="++" type="Integer" nParams="0">
            <Operation style="surround" target="Integer" value="()" type="Integer" nParams="0">
                <Function name="indexOf" type="Integer" static="false">
                    <Parameter index="0" type="String" />
                </Function>
            </Operation>
        </Operation>
    </Entry>

    <Entry genus="string-vappend" target="String" static="false" nParams="1" type="String">
        <Parameter type="String" />
        <Call genus="string-append">
            <Parameter index="0" type="String" />
        </Call>
    </Entry>

    <Entry genus="string-vappend" target="String" static="false" minParams="2" type="String">
        <Parameters start="0" type="String" />
        <Call genus="string-vappend">
            <Call genus="string-append">
                <Parameter index="0" type="Integer" />
            </Call>
            <Parameters start="1" type="Integer" />
        </Call>
    </Entry>

    <Entry genus="string-split-at-spaces" target="String" static="false" nParams="0" type="List">
        <Call genus="make-list">
            <Parameter>
                <Call genus="string-split">
                    <Parameter value="&quot;\s&quot;" type="String" />
                </Call>
            </Parameter>
        </Call>
    </Entry>

    <Entry genus="string-less-than" target="String" static="false" nParams="1" type="Boolean">
        <Parameter type="String" />
        <Operation style="surround" target="Boolean" value="()" type="Boolean" nParams="0">
            <Operation style="infix" target="Integer" value="&lt;" type="Boolean" nParams="1">
                <Function name="compareTo" type="Integer" static="false">
                    <Parameter index="0" type="String" />
                </Function>
                <Parameter value="0" type="Integer" />
            </Operation>
        </Operation>
    </Entry>

    <Entry genus="string-greater-than" target="String" static="false" nParams="1" type="Boolean">
        <Parameter type="String" />
        <Operation style="surround" target="Boolean" value="()" type="Boolean" nParams="0">
            <Operation style="infix" target="Integer" value="&gt;" type="Boolean" nParams="1">
                <Function name="compareTo" type="Integer" static="false">
                    <Parameter index="0" type="String" />
                </Function>
                <Parameter value="0" type="Integer" />
            </Operation>
        </Operation>
    </Entry>
</API>
